<header class="header">
	<div class="header-top bg-primary text-white py-2">
		<div class="container d-flex justify-content-between align-items-center">
			<p class="mb-0 small">Découvrez nos cuvées d'exception - Livraison offerte dès 12 bouteilles</p>
			<div class="header-socials d-flex gap-3">
				<a href="#" class="text-white" target="_blank" title="Facebook">
					<i class="fab fa-facebook-f"></i>
				</a>
				<a href="#" class="text-white" target="_blank" title="Instagram">
					<i class="fab fa-instagram"></i>
				</a>
				<a href="#" class="text-white" target="_blank" title="Twitter">
					<i class="fab fa-x-twitter"></i>
				</a>
			</div>
		</div>
	</div>
	<nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top shadow-sm">
		<div class="container">
			<a href="{{ path('app_home') }}" class="navbar-brand fw-bold text-primary">
				<i class="fas fa-wine-glass-alt me-2"></i>La Coopé des Vignerons</a>
			<div
				class="d-flex align-items-center gap-2 gap-lg-3 order-lg-3">
				{# Barre de recherche responsive #}
				<div class="search-container position-relative" data-controller="live-search" data-live-search-url-value="{{ path('api_product_search') }}">
					<form action="{{ path('app_product') }}" method="get" class="d-flex mb-0">
						<div class="input-group input-group-sm responsive-search-group">
							<input type="text" name="q" class="form-control rounded-start-3" placeholder="Rechercher..." data-live-search-target="input" data-action="input->live-search#onSearch blur->live-search#hideResults" autocomplete="off" style="max-width: 100px;">
							<button class="btn btn-outline-primary rounded-end-3" type="submit" aria-label="Lancer la recherche">
								<i class="fas fa-search"></i>
							</button>
						</div>
					</form>
					<div class="search-results position-absolute w-100 shadow-sm bg-white" data-live-search-target="results" style="z-index: 1050; top: 100%;"></div>
				</div>

				{# Styles pour la recherche responsive #}
				<style>
					@media(min-width: 576px) {
						.responsive-search-group input {
							max-width: 200px !important;
						}
					}
					@media(min-width: 992px) {
						.responsive-search-group input {
							max-width: 250px !important;
						}
					}
				</style>

				{# Profil / Login #}
				{% if app.user %}
					{% if is_granted('ROLE_ADMIN') %}
						<a href="{{ path('app_admin_dashboard') }}" class="btn btn-xs btn-primary text-white d-none d-lg-inline-block px-2 me-1" style="font-size: 0.65rem;">Admin</a>
					{% endif %}
					<a href="{{ path('app_profile') }}" class="text-dark text-decoration-none p-1 ms-1" title="Mon compte">
						<i class="fas fa-user-circle fa-lg"></i>
					</a>
					<a href="{{ path('app_logout') }}" class="btn btn-sm btn-outline-danger ms-1 d-flex align-items-center" title="Déconnexion" style="padding: 0.2rem 0.5rem;">
						<i class="fas fa-power-off"></i>
						<span class="d-none d-md-inline ms-1" style="font-size: 0.7rem;">Déconnexion</span>
					</a>
				{% else %}
					<a href="{{ path('app_login') }}" class="text-dark text-decoration-none p-1 ms-1" title="Se connecter">
						<i class="fas fa-sign-in-alt fa-lg"></i>
					</a>
				{% endif %}

				{# Panier #}
				<a href="{{ path('cart_index') }}" class="position-relative text-dark text-decoration-none p-1 ms-1" title="Voir mon panier">
					<i class="fas fa-shopping-basket fa-lg"></i>
					{% if cart_count() > 0 %}
						<span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-primary" style="font-size: 0.5rem; padding: 0.25em 0.4em;">
							{{ cart_count() }}
						</span>
					{% endif %}
				</a>

				{# Menu Burger Button #}
				<button class="navbar-toggler ms-2 border-0 p-1" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar" aria-controls="mainNavbar" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon" style="width: 1.25rem; height: 1.25rem;"></span>
				</button>
			</div>

			<div class="collapse navbar-collapse order-lg-2" id="mainNavbar">
				<ul class="navbar-nav me-auto mb-2 mb-lg-0 mt-3 mt-lg-0">
					<li class="nav-item">
						<a class="nav-link" href="{{ path('app_home') }}">Accueil</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="{{ path('app_product') }}">Produits</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="{{ path('app_about') }}">Domaine</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="{{ path('app_contact') }}">Contact</a>
					</li>
					{% if app.user and is_granted('ROLE_ADMIN') %}
						<li class="nav-item d-lg-none">
							<hr class="dropdown-divider">
							<a class="nav-link text-primary fw-bold" href="{{ path('app_admin_dashboard') }}">TABLEAU DE BORD ADMIN</a>
						</li>
					{% endif %}

				</ul>
			</div>
		</div>
	</nav>
</header>
